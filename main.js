!function(){"use strict";class e{constructor(e){this._url=e}getInitialCards(){return fetch(`${this._url}/cards`,{headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserInfo(){return fetch(`${this._url}/users/me`,{headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}saveUserInfo(e){return fetch(`${this._url}/users/me`,{method:"PATCH",headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05","Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})})}addNewCard(e){return fetch(`${this._url}/cards`,{method:"POST",headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05","Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link,_id:e.id})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05"}})}cardLikeToggle(e,t){return e?fetch(`${this._url}/cards/${t}/likes`,{method:"DELETE",headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05"}}):fetch(`${this._url}/cards/${t}/likes`,{method:"PUT",headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05"}})}updatePicture(e){return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:{authorization:"09c7eb58-4864-40aa-bfac-2e0d5eb72b05","Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}}new e("https://around-api.en.tripleten-services.com/v1");class t{constructor(e,t,s,n,r){this._cardSelector=t,this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._handleImageClick=s,this._handleDeleteCard=n,this._handleCardLike=r}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton.addEventListener("click",(e=>{this._handleDeleteCard(this._cardImage.id,this._cardElement)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleLikeButton(){this._handleCardLike(this._isLiked,this._cardImage.id),this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage.src=this._link,this._cardImage.id=this._id,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._isLiked&&this._likeButton.classList.add("card__like-button_active"),this._setEventListeners(),this._cardElement}}class s{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputErr(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=e.validationMessage,s.classList.add(this._errorClass)}_hideInputErr(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_toggleButtnState(){this._hasInvalInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalInput(){return this._inputElements.some((e=>!e.validity.valid))}_checkInputVal(e){e.validity.valid?this._hideInputErr(e):this._showInputErr(e)}_setEventListeners(){this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtnState()}),0)})),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputVal(e),this._toggleButtnState()}))}))}enableValidation(){this._setEventListeners()}}class n{constructor(e){this._popupElement=e,this._handleEscClose=this._handleEscClose.bind(this)}openPopup(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose,!0)}closePopup(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose,!0)}_handleEscClose(e){"Escape"===e.key&&this.closePopup()}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.closePopup()})),this._popupElement.addEventListener("click",(e=>{e.target==this._popupElement&&this.closePopup()}))}}class r extends n{constructor(e,t){super(e),this._submitButton=e.querySelector(".modal__button"),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t=[];return e.forEach((e=>{t[e.name]=e.value})),t}closePopup(){this._popupForm.reset(),super.closePopup()}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t,this._submitButton)})),super.setEventListeners()}}class o{constructor(e,t){let{data:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}renderItem(){this._renderer(this._items)}addItem(e){this._container.prepend(e)}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"},a=new e("https://around-api.en.tripleten-services.com/v1"),l=document.querySelector("#edit-modal"),c=document.querySelector("#add-modal"),u=document.querySelector("#delete-modal"),d=document.querySelector("#image-modal"),_=document.querySelector("#profile-picture-modal"),h=document.querySelector(".profile__edit-button"),m=(d.querySelector(".modal__close"),document.querySelector(".profile__add-button")),p=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector(".modal__input-name")),E=document.querySelector(".modal__input-description"),b=document.querySelector(".modal__input-title"),v=document.querySelector(".modal__input-url"),f=document.querySelector("#edit-profile-form"),S=document.querySelector("#add-card-form"),y=document.querySelector("#profile-picture-form"),C=document.querySelector(".media__list"),L=document.querySelector(".profile__avatar"),k=document.querySelector(".profile__avatar-icon"),g=[f,S,y],I=new class extends n{constructor(e){super(e)}openPopup(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__image-description");t.alt=e.name,t.src=e.link,s.textContent=e.name,super.openPopup()}}(d);function q(e,t){I.openPopup({name:e,link:t})}const P=new r(l,((e,t)=>{U.setUserInfo(e),a.saveUserInfo(e).then((()=>{t.textContent="Save",P.closePopup()})),t.textContent="Saving..."})),B=new r(_,((e,t)=>{a.updatePicture(e.url).then((e=>{t.textContent="Save",B.closePopup()})).catch((e=>{console.error(e)})),t.textContent="Saving..."})),w=new r(u,(()=>{}));function x(e,t){w.openPopup();const s=e;u.addEventListener("submit",(e=>{e.preventDefault(),a.deleteCard(s),t.remove(),w.closePopup()}))}function $(e,t){a.cardLikeToggle(e,t)}function T(e){return new t(e,"#card-template",q,x,$).getView()}h.addEventListener("click",(()=>{const e=U.getUserInfo();p.value=e.name,E.value=e.about,P.openPopup()})),g.forEach((function(e){new s(i,e).enableValidation()}));const U=new class{constructor(e){let{nameSelector:t,aboutMeSelector:s}=e;this._nameElement=document.querySelector(t),this._aboutMeElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutMeElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._aboutMeElement.textContent=e.about}}({nameSelector:".profile__title",aboutMeSelector:".profile__description"});P.setEventListeners(),I.setEventListeners(),w.setEventListeners(),B.setEventListeners(),L.addEventListener("mouseover",(()=>{k.style.visibility="visible"})),L.addEventListener("mouseout",(()=>{k.style.visibility="hidden"})),L.addEventListener("click",(()=>{B.openPopup()})),Promise.all([a.getUserInfo(),a.getInitialCards()]).then((e=>{const t=e[0],s=e[1];U.setUserInfo(t);const n=new o({data:s,renderer:e=>{const t=T(e);n.addItem(t)}},C),i=new r(c,((e,t)=>{const s=b.value,r=v.value;a.addNewCard({name:s,link:r}).then((e=>{const o=e._id;!function(e,t){const s=T(e);n.addItem(s)}({name:s,link:r,_id:o}),t.textContent="Create",i.closePopup()})).catch((e=>{console.error(e)})),t.textContent="Saving..."}));m.addEventListener("click",(()=>{i.openPopup()})),n.renderItems(),i.setEventListeners()})).catch((e=>{console.error(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFdBQUFBLENBQVlDLEdBQ1ZDLEtBQUtDLEtBQU9GLENBQ2QsQ0FDQUcsZUFBQUEsR0FDRSxPQUFPQyxNQUFPLEdBQUVILEtBQUtDLGFBQWMsQ0FDakNHLFFBQVMsQ0FDUEMsY0FBZSwwQ0FFaEJDLE1BQU1DLEdBQ0hBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVEsVUFBU0osRUFBSUssV0FFeEMsQ0FDQUMsV0FBQUEsR0FDRSxPQUFPVixNQUFPLEdBQUVILEtBQUtDLGdCQUFpQixDQUNwQ0csUUFBUyxDQUNQQyxjQUFlLDBDQUVoQkMsTUFBTUMsR0FDSEEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBUSxVQUFTSixFQUFJSyxXQUV4QyxDQUNBRSxZQUFBQSxDQUFhQyxHQUNYLE9BQU9aLE1BQU8sR0FBRUgsS0FBS0MsZ0JBQWlCLENBQ3BDZSxPQUFRLFFBQ1JaLFFBQVMsQ0FDUEMsY0FBZSx1Q0FDZixlQUFnQixvQkFFbEJZLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJDLEtBQU1MLEVBQUtLLEtBQ1hDLE1BQU9OLEVBQUtNLFNBR2xCLENBQ0FDLFVBQUFBLENBQVdDLEdBQ1QsT0FBT3BCLE1BQU8sR0FBRUgsS0FBS0MsYUFBYyxDQUNqQ2UsT0FBUSxPQUNSWixRQUFTLENBQ1BDLGNBQWUsdUNBQ2YsZUFBZ0Isb0JBRWxCWSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CQyxLQUFNRyxFQUFTSCxLQUNmSSxLQUFNRCxFQUFTQyxLQUNmQyxJQUFLRixFQUFTRyxPQUVmcEIsTUFBTUMsR0FDSEEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBUSxVQUFTSixFQUFJSyxXQUV4QyxDQUNBZSxVQUFBQSxDQUFXRCxHQUNULE9BQU92QixNQUFPLEdBQUVILEtBQUtDLGNBQWN5QixJQUFNLENBQ3ZDVixPQUFRLFNBQ1JaLFFBQVMsQ0FDUEMsY0FBZSx5Q0FHckIsQ0FDQXVCLGNBQUFBLENBQWVDLEVBQVNILEdBQ3RCLE9BQUlHLEVBQ0sxQixNQUFPLEdBQUVILEtBQUtDLGNBQWN5QixVQUFZLENBQzdDVixPQUFRLFNBQ1JaLFFBQVMsQ0FDUEMsY0FBZSwwQ0FJWkYsTUFBTyxHQUFFSCxLQUFLQyxjQUFjeUIsVUFBWSxDQUM3Q1YsT0FBUSxNQUNSWixRQUFTLENBQ1BDLGNBQWUseUNBSXZCLENBQ0F5QixhQUFBQSxDQUFjZixHQUNaLE9BQU9aLE1BQU8sR0FBRUgsS0FBS0MsdUJBQXdCLENBQzNDZSxPQUFRLFFBQ1JaLFFBQVMsQ0FDUEMsY0FBZSx1Q0FDZixlQUFnQixvQkFFbEJZLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJZLE9BQVFoQixLQUdkLEVDL0ZVLElBQUlsQixFQUFJLG1EQUNMLE1BQU1tQyxFQUNuQmxDLFdBQUFBLENBQ0VpQixFQUNBa0IsRUFDQUMsRUFDQUMsRUFDQUMsR0FFQXBDLEtBQUtxQyxjQUFnQkosRUFDckJqQyxLQUFLc0MsTUFBUXZCLEVBQUtLLEtBQ2xCcEIsS0FBS3VDLE1BQVF4QixFQUFLUyxLQUNsQnhCLEtBQUt5QixJQUFNVixFQUFLVSxJQUNoQnpCLEtBQUt3QyxTQUFXekIsRUFBS2MsUUFDckI3QixLQUFLeUMsa0JBQW9CUCxFQUN6QmxDLEtBQUswQyxrQkFBb0JQLEVBQ3pCbkMsS0FBSzJDLGdCQUFrQlAsQ0FDekIsQ0FDQVEsa0JBQUFBLEdBQ0U1QyxLQUFLNkMsWUFBWUMsaUJBQWlCLFNBQVMsS0FDekM5QyxLQUFLK0MsbUJBQW1CLElBRTFCL0MsS0FBS2dELGNBQWNGLGlCQUFpQixTQUFVRyxJQUc1Q2pELEtBQUswQyxrQkFBa0IxQyxLQUFLa0QsV0FBV3hCLEdBQUkxQixLQUFLbUQsYUFBYSxJQUUvRG5ELEtBQUtrRCxXQUFXSixpQkFBaUIsU0FBUyxLQUN4QzlDLEtBQUt5QyxrQkFBa0J6QyxLQUFLc0MsTUFBT3RDLEtBQUt1QyxNQUFNLEdBRWxELENBRUFRLGlCQUFBQSxHQUNFL0MsS0FBSzJDLGdCQUFnQjNDLEtBQUt3QyxTQUFVeEMsS0FBS2tELFdBQVd4QixJQUNwRDFCLEtBQUs2QyxZQUFZTyxVQUFVQyxPQUFPLDJCQUNwQyxDQUVBQyxPQUFBQSxHQWtCRSxPQWpCQXRELEtBQUttRCxhQUFlSSxTQUNqQkMsY0FBY3hELEtBQUtxQyxlQUNuQm9CLFFBQVFDLGtCQUFrQkMsV0FBVSxHQUN2QzNELEtBQUs2QyxZQUFjN0MsS0FBS21ELGFBQWFLLGNBQWMsc0JBQ25EeEQsS0FBS2dELGNBQWdCaEQsS0FBS21ELGFBQWFLLGNBQ3JDLHdCQUVGeEQsS0FBS2tELFdBQWFsRCxLQUFLbUQsYUFBYUssY0FBYyxnQkFDbER4RCxLQUFLNEQsV0FBYTVELEtBQUttRCxhQUFhSyxjQUFjLGdCQUNsRHhELEtBQUtrRCxXQUFXVyxJQUFNN0QsS0FBS3VDLE1BQzNCdkMsS0FBS2tELFdBQVd4QixHQUFLMUIsS0FBS3lCLElBQzFCekIsS0FBS2tELFdBQVdZLElBQU05RCxLQUFLc0MsTUFDM0J0QyxLQUFLNEQsV0FBV0csWUFBYy9ELEtBQUtzQyxNQUMvQnRDLEtBQUt3QyxVQUNQeEMsS0FBSzZDLFlBQVlPLFVBQVVZLElBQUksNEJBRWpDaEUsS0FBSzRDLHFCQUNFNUMsS0FBS21ELFlBQ2QsRUN6RGEsTUFBTWMsRUFDbkJuRSxXQUFBQSxDQUFZb0UsRUFBVUMsR0FDcEJuRSxLQUFLb0UsYUFBZUQsRUFDcEJuRSxLQUFLcUUsZUFBaUJILEVBQVNJLGNBQy9CdEUsS0FBS3VFLHNCQUF3QkwsRUFBU00scUJBQ3RDeEUsS0FBS3lFLHFCQUF1QlAsRUFBU1Esb0JBQ3JDMUUsS0FBSzJFLGlCQUFtQlQsRUFBU1UsZ0JBQ2pDNUUsS0FBSzZFLFlBQWNYLEVBQVNZLFVBQzlCLENBRUFDLGFBQUFBLENBQWNDLEVBQWNDLEdBQzFCLE1BQU1DLEVBQWVsRixLQUFLb0UsYUFBYVosY0FDcEMsSUFBR3dCLEVBQWF0RCxZQUVuQnNELEVBQWE1QixVQUFVWSxJQUFJaEUsS0FBSzJFLGtCQUNoQ08sRUFBYW5CLFlBQWNpQixFQUFhRyxrQkFDeENELEVBQWE5QixVQUFVWSxJQUFJaEUsS0FBSzZFLFlBQ2xDLENBRUFPLGFBQUFBLENBQWNKLEdBQ1osTUFBTUUsRUFBZWxGLEtBQUtvRSxhQUFhWixjQUNwQyxJQUFHd0IsRUFBYXRELFlBRW5Cc0QsRUFBYTVCLFVBQVVpQyxPQUFPckYsS0FBSzJFLGtCQUNuQ08sRUFBYTlCLFVBQVVpQyxPQUFPckYsS0FBSzZFLGFBQ25DSyxFQUFhbkIsWUFBYyxFQUM3QixDQUNBdUIsaUJBQUFBLEdBQ010RixLQUFLdUYsa0JBQ1B2RixLQUFLd0YsY0FBY3BDLFVBQVVZLElBQUloRSxLQUFLeUUsc0JBQ3RDekUsS0FBS3dGLGNBQWNDLFVBQVcsSUFFOUJ6RixLQUFLd0YsY0FBY3BDLFVBQVVpQyxPQUFPckYsS0FBS3lFLHNCQUN6Q3pFLEtBQUt3RixjQUFjQyxVQUFXLEVBRWxDLENBQ0FGLGNBQUFBLEdBQ0UsT0FBT3ZGLEtBQUswRixlQUFlQyxNQUFNWCxJQUN2QkEsRUFBYVksU0FBU0MsT0FFbEMsQ0FFQUMsY0FBQUEsQ0FBZWQsR0FDUkEsRUFBYVksU0FBU0MsTUFHekI3RixLQUFLb0YsY0FBY0osR0FGbkJoRixLQUFLK0UsY0FBY0MsRUFJdkIsQ0FDQXBDLGtCQUFBQSxHQUNFNUMsS0FBSzBGLGVBQWlCSyxNQUFNQyxLQUMxQmhHLEtBQUtvRSxhQUFhNkIsaUJBQWlCakcsS0FBS3FFLGlCQUUxQ3JFLEtBQUt3RixjQUFnQnhGLEtBQUtvRSxhQUFhWixjQUNyQ3hELEtBQUt1RSx1QkFFUHZFLEtBQUtvRSxhQUFhdEIsaUJBQWlCLFNBQVMsS0FDMUNvRCxZQUFXLEtBQ1RsRyxLQUFLc0YsbUJBQW1CLEdBQ3ZCLEVBQUUsSUFFUHRGLEtBQUswRixlQUFlUyxTQUFTbkIsSUFDM0JBLEVBQWFsQyxpQkFBaUIsU0FBVUcsSUFDdENqRCxLQUFLOEYsZUFBZWQsR0FDcEJoRixLQUFLc0YsbUJBQW1CLEdBQ3hCLEdBRU4sQ0FDQWMsZ0JBQUFBLEdBQ0VwRyxLQUFLNEMsb0JBQ1AsRUN0RWEsTUFBTXlELEVBQ25CdkcsV0FBQUEsQ0FBWXdHLEdBQ1Z0RyxLQUFLdUcsY0FBZ0JELEVBQ3JCdEcsS0FBS3dHLGdCQUFrQnhHLEtBQUt3RyxnQkFBZ0JDLEtBQUt6RyxLQUNuRCxDQUNBMEcsU0FBQUEsR0FDRTFHLEtBQUt1RyxjQUFjbkQsVUFBVVksSUFBSSxnQkFDakNULFNBQVNULGlCQUFpQixVQUFXOUMsS0FBS3dHLGlCQUFpQixFQUM3RCxDQUNBRyxVQUFBQSxHQUNFM0csS0FBS3VHLGNBQWNuRCxVQUFVaUMsT0FBTyxnQkFDcEM5QixTQUFTcUQsb0JBQW9CLFVBQVc1RyxLQUFLd0csaUJBQWlCLEVBQ2hFLENBQ0FBLGVBQUFBLENBQWdCdkQsR0FDRSxXQUFaQSxFQUFJNEQsS0FDTjdHLEtBQUsyRyxZQUVULENBRUFHLGlCQUFBQSxHQUNFOUcsS0FBS3VHLGNBQ0YvQyxjQUFjLGlCQUNkVixpQkFBaUIsU0FBUyxLQUN6QjlDLEtBQUsyRyxZQUFZLElBRXJCM0csS0FBS3VHLGNBQWN6RCxpQkFBaUIsU0FBVUcsSUFDeENBLEVBQUk4RCxRQUFVL0csS0FBS3VHLGVBQ3JCdkcsS0FBSzJHLFlBQ1AsR0FFSixFQzdCYSxNQUFNSyxVQUFzQlgsRUFDekN2RyxXQUFBQSxDQUFZd0csRUFBY1csR0FDeEJDLE1BQU1aLEdBQ050RyxLQUFLd0YsY0FBZ0JjLEVBQWE5QyxjQUFjLGtCQUNoRHhELEtBQUttSCxXQUFhbkgsS0FBS3VHLGNBQWMvQyxjQUFjLGdCQUNuRHhELEtBQUtvSCxrQkFBb0JILENBQzNCLENBQ0FJLGVBQUFBLEdBQ0UsTUFBTUMsRUFBU3RILEtBQUttSCxXQUFXbEIsaUJBQWlCLGlCQUMxQ3NCLEVBQWMsR0FJcEIsT0FIQUQsRUFBT25CLFNBQVNxQixJQUNkRCxFQUFZQyxFQUFNcEcsTUFBUW9HLEVBQU1DLEtBQUssSUFFaENGLENBQ1QsQ0FDQVosVUFBQUEsR0FDRTNHLEtBQUttSCxXQUFXTyxRQUNoQlIsTUFBTVAsWUFDUixDQUNBRyxpQkFBQUEsR0FDRTlHLEtBQUt1RyxjQUFjekQsaUJBQWlCLFVBQVdHLElBQzdDQSxFQUFJMEUsaUJBQ0osTUFBTUosRUFBY3ZILEtBQUtxSCxrQkFDekJySCxLQUFLb0gsa0JBQWtCRyxFQUFhdkgsS0FBS3dGLGNBQWMsSUFFekQwQixNQUFNSixtQkFDUixFQzNCYSxNQUFNYyxFQUNuQjlILFdBQUFBLENBQVcrSCxFQUFxQkMsR0FBVyxJQUEvQixLQUFFL0csRUFBSSxTQUFFZ0gsR0FBVUYsRUFDNUI3SCxLQUFLZ0ksT0FBU2pILEVBQ2RmLEtBQUtpSSxVQUFZRixFQUNqQi9ILEtBQUtrSSxXQUFhSixDQUNwQixDQUNBSyxXQUFBQSxHQUNFbkksS0FBS2dJLE9BQU83QixTQUFTaUMsSUFDbkJwSSxLQUFLaUksVUFBVUcsRUFBSyxHQUV4QixDQUdBQyxVQUFBQSxHQUNFckksS0FBS2lJLFVBQVVqSSxLQUFLZ0ksT0FDdEIsQ0FJQU0sT0FBQUEsQ0FBUUMsR0FDTnZJLEtBQUtrSSxXQUFXTSxRQUFRRCxFQUMxQixFQ3JCRixNQTBCTXJFLEVBQVcsQ0FDZnVFLGFBQWMsZUFDZG5FLGNBQWUsZ0JBQ2ZFLHFCQUFzQixpQkFDdEJFLG9CQUFxQix5QkFDckJFLGdCQUFpQiwwQkFDakJFLFdBQVksNkJDWlI0RCxFQUFNLElBQUk3SSxFQUFJLG1EQUVkOEksRUFBZXBGLFNBQVNDLGNBQWMsZUFDdENvRixFQUFlckYsU0FBU0MsY0FBYyxjQUN0Q3FGLEVBQWN0RixTQUFTQyxjQUFjLGlCQUNyQ3NGLEVBQWF2RixTQUFTQyxjQUFjLGdCQUNwQ3VGLEVBQXNCeEYsU0FBU0MsY0FBYywwQkFDN0N3RixFQUFhekYsU0FBU0MsY0FBYyx5QkFFcEN5RixHQUR3QkgsRUFBV3RGLGNBQWMsaUJBQ3JDRCxTQUFTQyxjQUFjLHlCQUduQzBGLEdBRmMzRixTQUFTQyxjQUFjLG1CQUN2QkQsU0FBU0MsY0FBYyx5QkFDekJELFNBQVNDLGNBQWMsdUJBQ25DMkYsRUFBWTVGLFNBQVNDLGNBQWMsNkJBQ25DNEYsRUFBZTdGLFNBQVNDLGNBQWMsdUJBQ3RDNkYsRUFBYTlGLFNBQVNDLGNBQWMscUJBQ3BDOEYsRUFBYy9GLFNBQVNDLGNBQWMsc0JBQ3JDK0YsRUFBY2hHLFNBQVNDLGNBQWMsa0JBQ3JDZ0csRUFBcUJqRyxTQUFTQyxjQUFjLHlCQUM1Q2lHLEVBQVlsRyxTQUFTQyxjQUFjLGdCQUNuQ2tHLEVBQWVuRyxTQUFTQyxjQUFjLG9CQUN0Q21HLEVBQWtCcEcsU0FBU0MsY0FBYyx5QkFDekNvRyxFQUFRLENBQUNOLEVBQWFDLEVBQWFDLEdBTW5DSyxFQUFhLElDL0NKLGNBQTZCeEQsRUFDMUN2RyxXQUFBQSxDQUFZd0csR0FDVlksTUFBTVosRUFDUixDQUNBSSxTQUFBQSxDQUFVM0YsR0FDUixNQUFNK0ksRUFBZTlKLEtBQUt1RyxjQUFjL0MsY0FBYyxpQkFDaER1RyxFQUFvQi9KLEtBQUt1RyxjQUFjL0MsY0FDM0MsNkJBR0ZzRyxFQUFhaEcsSUFBTS9DLEVBQUtLLEtBQ3hCMEksRUFBYWpHLElBQU05QyxFQUFLUyxLQUN4QnVJLEVBQWtCaEcsWUFBY2hELEVBQUtLLEtBQ3JDOEYsTUFBTVIsV0FDUixHRGlDb0NvQyxHQUN0QyxTQUFTNUcsRUFBaUJkLEVBQU1JLEdBQzlCcUksRUFBV25ELFVBQVUsQ0FBRXRGLE9BQU1JLFFBQy9CLENBR0EsTUFBTXdJLEVBQWUsSUFBSWhELEVBQWMyQixHQUFjLENBQUM1SCxFQUFNa0osS0FDMURDLEVBQVNDLFlBQVlwSixHQUNyQjJILEVBQUk1SCxhQUFhQyxHQUFNVCxNQUFLLEtBQzFCMkosRUFBT2xHLFlBQWMsT0FDckJpRyxFQUFhckQsWUFBWSxJQUUzQnNELEVBQU9sRyxZQUFjLFdBQVcsSUFHNUJxRyxFQUFzQixJQUFJcEQsRUFDOUIrQixHQUNBLENBQUNoSSxFQUFNa0osS0FDTHZCLEVBQ0c1RyxjQUFjZixFQUFLc0osS0FDbkIvSixNQUFNQyxJQUNMMEosRUFBT2xHLFlBQWMsT0FDckJxRyxFQUFvQnpELFlBQVksSUFFakMyRCxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBRXRCTixFQUFPbEcsWUFBYyxXQUFXLElBSTlCMkcsRUFBYyxJQUFJMUQsRUFBYzZCLEdBQWEsU0FTbkQsU0FBUzFHLEVBQWlCd0ksRUFBUUMsR0FDaENGLEVBQVloRSxZQUNaLE1BQU1oRixFQUFLaUosRUFDWDlCLEVBQVkvRixpQkFBaUIsVUFBV0csSUFDdENBLEVBQUkwRSxpQkFDSmUsRUFBSS9HLFdBQVdELEdBQ2ZrSixFQUFZdkYsU0FDWnFGLEVBQVkvRCxZQUFZLEdBRTVCLENBQ0EsU0FBU3ZFLEVBQWVQLEVBQVM4SSxHQUMvQmpDLEVBQUk5RyxlQUFlQyxFQUFTOEksRUFDOUIsQ0FDQSxTQUFTRSxFQUFXOUosR0FRbEIsT0FQb0IsSUFBSWlCLEVBQ3RCakIsRUFDQSxpQkFDQW1CLEVBQ0FDLEVBQ0FDLEdBRWlCa0IsU0FDckIsQ0FxQkEwRixFQUFXbEcsaUJBQWlCLFNBQVMsS0FDbkMsTUFBTWdJLEVBQU9aLEVBQVNySixjQUN0QnFJLEVBQVV6QixNQUFRcUQsRUFBSzFKLEtBQ3ZCK0gsRUFBVTFCLE1BQVFxRCxFQUFLekosTUFDdkIySSxFQUFhdEQsV0FBVyxJQUcxQmtELEVBQU16RCxTQUFRLFNBQVU0RSxHQUNHLElBQUk5RyxFQUFjQyxFQUFVNkcsR0FDcEMzRSxrQkFDbkIsSUFDQSxNQUFNOEQsRUFBVyxJRTlJRixNQUNicEssV0FBQUEsQ0FBVytILEdBQW9DLElBQW5DLGFBQUVtRCxFQUFZLGdCQUFFQyxHQUFpQnBELEVBQzNDN0gsS0FBS2tMLGFBQWUzSCxTQUFTQyxjQUFjd0gsR0FDM0NoTCxLQUFLbUwsZ0JBQWtCNUgsU0FBU0MsY0FBY3lILEVBQ2hELENBQ0FwSyxXQUFBQSxHQUNFLE1BQU8sQ0FDTE8sS0FBTXBCLEtBQUtrTCxhQUFhbkgsWUFDeEIxQyxNQUFPckIsS0FBS21MLGdCQUFnQnBILFlBRWhDLENBQ0FvRyxXQUFBQSxDQUFZcEosR0FLVmYsS0FBS2tMLGFBQWFuSCxZQUFjaEQsRUFBS0ssS0FDckNwQixLQUFLbUwsZ0JBQWdCcEgsWUFBY2hELEVBQUtNLEtBQzFDLEdIZ0JrQixDQUNsQjJKLGFBQWMsa0JBQ2RDLGdCQUFpQiwwQkM0R25CakIsRUFBYWxELG9CQUViK0MsRUFBVy9DLG9CQUNYNEQsRUFBWTVELG9CQUNac0QsRUFBb0J0RCxvQkFDcEI0QyxFQUFhNUcsaUJBQWlCLGFBQWEsS0FDekM2RyxFQUFnQnlCLE1BQU1DLFdBQWEsU0FBUyxJQUU5QzNCLEVBQWE1RyxpQkFBaUIsWUFBWSxLQUN4QzZHLEVBQWdCeUIsTUFBTUMsV0FBYSxRQUFRLElBRTdDM0IsRUFBYTVHLGlCQUFpQixTQUFTLEtBQ3JDc0gsRUFBb0IxRCxXQUFXLElBdUJqQ2hHLFFBQVE0SyxJQUFJLENBQUM1QyxFQUFJN0gsY0FBZTZILEVBQUl4SSxvQkFDakNJLE1BQU1DLElBQ0wsTUFBTWdMLEVBQWNoTCxFQUFJLEdBQ2xCaUwsRUFBWWpMLEVBQUksR0FDdEIySixFQUFTQyxZQUFZb0IsR0FDckIsTUFBTUUsRUFBWSxJQUFJN0QsRUFDcEIsQ0FDRTdHLEtBQU15SyxFQUNOekQsU0FBVzJELElBQ1QsTUFBTUMsRUFBVWQsRUFBV2EsR0FDM0JELEVBQVVuRCxRQUFRcUQsRUFBUSxHQUc5QmxDLEdBTUltQyxFQUFXLElBQUk1RSxFQUFjNEIsR0FBYyxDQUFDN0gsRUFBTWtKLEtBQ3RELE1BQU03SSxFQUFPZ0ksRUFBYTNCLE1BQ3BCakcsRUFBTzZILEVBQVc1QixNQUN4QmlCLEVBQ0dwSCxXQUFXLENBQUVGLE9BQU1JLFNBQ25CbEIsTUFBTUMsSUFDTCxNQUFNa0IsRUFBTWxCLEVBQUlrQixLQVZ0QixTQUFpQlYsRUFBTThLLEdBQ3JCLE1BQU1GLEVBQVVkLEVBQVc5SixHQUMzQjBLLEVBQVVuRCxRQUFRcUQsRUFDcEIsQ0FRTUcsQ0FBUSxDQUFFMUssT0FBTUksT0FBTUMsUUFDdEJ3SSxFQUFPbEcsWUFBYyxTQUNyQjZILEVBQVNqRixZQUFZLElBRXRCMkQsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQUV0Qk4sRUFBT2xHLFlBQWMsV0FBVyxJQUVsQ2tGLEVBQVVuRyxpQkFBaUIsU0FBUyxLQUNsQzhJLEVBQVNsRixXQUFXLElBRXRCK0UsRUFBVXRELGNBQ1Z5RCxFQUFTOUUsbUJBQW1CLElBRTdCd0QsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl91cmwgPSBvcHRpb25zO1xuICB9XG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwOWM3ZWI1OC00ODY0LTQwYWEtYmZhYy0yZTBkNWViNzJiMDVcIixcbiAgICAgIH0sXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjA5YzdlYjU4LTQ4NjQtNDBhYS1iZmFjLTJlMGQ1ZWI3MmIwNVwiLFxuICAgICAgfSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgc2F2ZVVzZXJJbmZvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjA5YzdlYjU4LTQ4NjQtNDBhYS1iZmFjLTJlMGQ1ZWI3MmIwNVwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuICBhZGROZXdDYXJkKGNhcmRJbmZvKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjA5YzdlYjU4LTQ4NjQtNDBhYS1iZmFjLTJlMGQ1ZWI3MmIwNVwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmRJbmZvLm5hbWUsXG4gICAgICAgIGxpbms6IGNhcmRJbmZvLmxpbmssXG4gICAgICAgIF9pZDogY2FyZEluZm8uaWQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjA5YzdlYjU4LTQ4NjQtNDBhYS1iZmFjLTJlMGQ1ZWI3MmIwNVwiLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuICBjYXJkTGlrZVRvZ2dsZShpc0xpa2VkLCBpZCkge1xuICAgIGlmIChpc0xpa2VkKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwOWM3ZWI1OC00ODY0LTQwYWEtYmZhYy0yZTBkNWViNzJiMDVcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwOWM3ZWI1OC00ODY0LTQwYWEtYmZhYy0yZTBkNWViNzJiMDVcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB1cGRhdGVQaWN0dXJlKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwOWM3ZWI1OC00ODY0LTQwYWEtYmZhYy0yZTBkNWViNzJiMDVcIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGRhdGEsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxufVxuLy8gc2F2ZVVzZXJJbmZvKGRhdGEpIHtcbi8vICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4vLyAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4vLyAgICAgaGVhZGVyczoge1xuLy8gICAgICAgYXV0aG9yaXphdGlvbjogXCIwOWM3ZWI1OC00ODY0LTQwYWEtYmZhYy0yZTBkNWViNzJiMDVcIixcbi8vICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuLy8gICAgIH0sXG4vLyAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuLy8gICAgICAgbmFtZTogZGF0YS5uYW1lLFxuLy8gICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXG4vLyAgICAgfSksXG4vLyAgIH0pO1xuLy8gfVxuIiwiaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiKTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNhcmQsXG4gICAgaGFuZGxlQ2FyZExpa2VcbiAgKSB7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcbiAgfVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgLy8gdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAvLyB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJbWFnZS5pZCk7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJbWFnZS5pZCwgdGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMuX2lzTGlrZWQsIHRoaXMuX2NhcmRJbWFnZS5pZCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5pZCA9IHRoaXMuX2lkO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRuU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBfaGFzSW52YWxJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWwoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnIoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRuU3RhdGUoKTtcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbChpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0blN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuICBvcGVuUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UsIHRydWUpO1xuICB9XG4gIGNsb3NlUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UsIHRydWUpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwRWxlbWVudCk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGNvbnN0IGlucHV0T2JqZWN0ID0gW107XG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dE9iamVjdDtcbiAgfVxuICBjbG9zZVBvcHVwKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGlucHV0T2JqZWN0ID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRPYmplY3QsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgdGhpcy5faXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG4gIC8vVGhpcyBmdW5jdGlvbiByZW5kZXJzIHRoZSBuZXcgY2FyZHNcbiAgLy9zaW5jZSBpdCBpcyBub3QgYW4gYXJyYXkvdGhlbiBhZGRJdGVtIGFkZHMgdGhlbVxuICByZW5kZXJJdGVtKCkge1xuICAgIHRoaXMuX3JlbmRlcmVyKHRoaXMuX2l0ZW1zKTtcbiAgfVxuICAvL2kgY2hhbmdlZCB0aGlzIHRvIFwicHJlcGVuZFwiIGJ1dCB0aGlzIG5vdCBvbmx5XG4gIC8vIGFkZHMgbmV3IGNhcmRzLCBpdCBhbHNvIGFkZHMgdGhlIGFycmF5IG9mIGluaXRpYWwgY2FyZHNcbiAgLy8gc28gaSdtIG5vdCBzdXJlIGlmIGl0cyBjb3JyZWN0XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIk5ldyBZb3JrIENpdHlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTEyODUwMTgzLTZkNzk5MGY0MjM4NT9hdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTgwJnc9MzA4NyZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2VhdHRsZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDQ5NjY1NDYzNDAtNDg3MDY2N2YxZjQ0P2F1dG89Zm9ybWF0JmZpdD1jcm9wJnE9ODAmdz0zMTE4Jml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJEaXNuZXkgV29ybGRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTk3NDY2NTk5MzYwLTNiOTc3NTg0MWFlYz9hdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTgwJnc9MjAwMCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2NvdHRsYW5kXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3ODI0MDc0NzAzNC01YmExZWZlMjI0MjY/YXV0bz1mb3JtYXQmZml0PWNyb3AmcT04MCZ3PTMxNzMmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkljZWxhbmRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDg5NTkzNDI2NjI5LTVlNGUwMGNlODIxYz9hdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTgwJnc9MjE0MyZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQm9yYSBCb3JhXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY2MjI4MzgwNDc1Ny1lZjgxYWNkNTQ3MWU/YXV0bz1mb3JtYXQmZml0PWNyb3AmcT04MCZ3PTMxNjUmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG5dO1xuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuY29uc3QgcHJvZmlsZUluZm8gPSB7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgYWJvdXRNZVNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufTtcbmV4cG9ydCB7IGluaXRpYWxDYXJkcywgc2V0dGluZ3MsIHByb2ZpbGVJbmZvIH07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncywgcHJvZmlsZUluZm8gfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vLyBjb25zdCBzZXR0aW5ncyA9IHtcbi8vICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuLy8gICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbi8vICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbi8vICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2luYWN0aXZlXCIsXG4vLyAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuLy8gICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbi8vIH07XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiKTtcblxuY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgbmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbW9kYWxcIik7XG5jb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLW1vZGFsXCIpO1xuY29uc3QgaW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlUGljdHVyZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpY3R1cmUtbW9kYWxcIik7XG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGltYWdlTW9kYWxDbG9zZUJ1dHRvbiA9IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dC1uYW1lXCIpO1xuY29uc3QgaW5wdXREZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXQtZGVzY3JpcHRpb25cIik7XG5jb25zdCBuZXdDYXJkVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dC10aXRsZVwiKTtcbmNvbnN0IG5ld0NhcmRVUkwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dC11cmxcIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLWZvcm1cIik7XG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVQaWN0dXJlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWN0dXJlLWZvcm1cIik7XG5jb25zdCBtZWRpYUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lZGlhX19saXN0XCIpO1xuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBwcm9maWxlRWRpdEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1pY29uXCIpO1xuY29uc3QgZm9ybXMgPSBbcHJvZmlsZUZvcm0sIGFkZENhcmRGb3JtLCBwcm9maWxlUGljdHVyZUZvcm1dO1xuLy8gY29uc3QgaW5pdENhcmRzID0gW107XG5cbi8vIGNvbnN0IHByb2ZpbGVJbmZvID0gW3Byb2ZpbGVOYW1lLCBwcm9maWxlRGVzY107XG5jb25zdCBwcm9maWxlSW5wdXRzID0gW2lucHV0TmFtZSwgaW5wdXREZXNjXTtcbi8vUG9wdXBzXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlTW9kYWwpO1xuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKSB7XG4gIGltYWdlUG9wdXAub3BlblBvcHVwKHsgbmFtZSwgbGluayB9KTtcbn1cblxuLy9Qb3B1cCBGb3Jtc1xuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZU1vZGFsLCAoZGF0YSwgYnV0dG9uKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBhcGkuc2F2ZVVzZXJJbmZvKGRhdGEpLnRoZW4oKCkgPT4ge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIHByb2ZpbGVQb3B1cC5jbG9zZVBvcHVwKCk7XG4gIH0pO1xuICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xufSk7XG5cbmNvbnN0IHByb2ZpbGVQaWN0dXJlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgcHJvZmlsZVBpY3R1cmVNb2RhbCxcbiAgKGRhdGEsIGJ1dHRvbikgPT4ge1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZVBpY3R1cmUoZGF0YS51cmwpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgICAgICBwcm9maWxlUGljdHVyZVBvcHVwLmNsb3NlUG9wdXAoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICB9XG4pO1xuXG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGRlbGV0ZU1vZGFsLCAoKSA9PiB7fSk7XG4vLyBjb25zdCBjYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKG5ld0NhcmRNb2RhbCwgKGRhdGEpID0+IHtcbi8vICAgY29uc3QgbmFtZSA9IG5ld0NhcmRUaXRsZS52YWx1ZTtcbi8vICAgY29uc3QgbGluayA9IG5ld0NhcmRVUkwudmFsdWU7XG4vLyAgIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0sIG1lZGlhTGlzdCk7XG4vLyAgIGFwaS5hZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KTtcbi8vICAgY2FyZEZvcm0uY2xvc2VQb3B1cCgpO1xuLy8gfSk7XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBkZWxldGVQb3B1cC5vcGVuUG9wdXAoKTtcbiAgY29uc3QgaWQgPSBjYXJkSWQ7XG4gIGRlbGV0ZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGFwaS5kZWxldGVDYXJkKGlkKTtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICBkZWxldGVQb3B1cC5jbG9zZVBvcHVwKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoaXNMaWtlZCwgY2FyZElkKSB7XG4gIGFwaS5jYXJkTGlrZVRvZ2dsZShpc0xpa2VkLCBjYXJkSWQpO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXG4gICAgZGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxuICAgIGhhbmRsZUNhcmRMaWtlXG4gICk7XG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XG59XG5cbi8vIGZ1bmN0aW9uIGFkZENhcmQoZGF0YSwgd3JhcHBlcikge1xuLy8gICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcbi8vICAgY2FyZHNMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XG4vLyB9XG4vLyBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbi8vICAge1xuLy8gICAgIGRhdGE6IGluaXRpYWxDYXJkcyxcbi8vICAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XG4vLyAgICAgICBjb25zb2xlLmxvZyhjYXJkSXRlbSk7XG4vLyAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XG4vLyAgICAgICBjYXJkc0xpc3QuYWRkSXRlbShuZXdDYXJkKTtcbi8vICAgICB9LFxuLy8gICB9LFxuLy8gICBtZWRpYUxpc3Rcbi8vICk7XG4vLyBjYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcbi8vIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICBjYXJkRm9ybS5vcGVuUG9wdXAoKTtcbi8vIH0pO1xuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gaW5mby5uYW1lO1xuICBpbnB1dERlc2MudmFsdWUgPSBpbmZvLmFib3V0O1xuICBwcm9maWxlUG9wdXAub3BlblBvcHVwKCk7XG59KTtcblxuZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAoZm9ybSkge1xuICBjb25zdCBuZXdGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm0pO1xuICBuZXdGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZUluZm8pO1xuXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8vIGNhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZVBpY3R1cmVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICBwcm9maWxlRWRpdEljb24uc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xufSk7XG5wcm9maWxlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcbiAgcHJvZmlsZUVkaXRJY29uLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xufSk7XG5wcm9maWxlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVBpY3R1cmVQb3B1cC5vcGVuUG9wdXAoKTtcbn0pO1xuXG5jb25zdCBhcGlJbmZvID0ge1xuICB1cmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWVcIixcbn07XG5cbi8vIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IHtcbi8vICAgY29uc3QgaW5pdENhcmRzID0gcmVzO1xuLy8gICBjb25zb2xlLmxvZyhpbml0Q2FyZHMpO1xuLy8gICBjb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbi8vICAgICB7XG4vLyAgICAgICBkYXRhOiBpbml0Q2FyZHMsXG4vLyAgICAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XG4vLyAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGNhcmRJdGVtKTtcbi8vICAgICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XG4vLyAgICAgICB9LFxuLy8gICAgIH0sXG4vLyAgICAgbWVkaWFMaXN0XG4vLyAgICk7XG4vLyAgIGNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xuLy8gfSk7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKHJlcykgPT4ge1xuICAgIGNvbnN0IHByb2ZpbGVJbmZvID0gcmVzWzBdO1xuICAgIGNvbnN0IGluaXRDYXJkcyA9IHJlc1sxXTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlSW5mbyk7XG4gICAgY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGRhdGE6IGluaXRDYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGNhcmRJdGVtKTtcbiAgICAgICAgICBjYXJkc0xpc3QuYWRkSXRlbShuZXdDYXJkKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBtZWRpYUxpc3RcbiAgICApO1xuICAgIGZ1bmN0aW9uIGFkZENhcmQoZGF0YSwgd3JhcHBlcikge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShuZXdDYXJkKTtcbiAgICB9XG4gICAgY29uc3QgY2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShuZXdDYXJkTW9kYWwsIChkYXRhLCBidXR0b24pID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBuZXdDYXJkVGl0bGUudmFsdWU7XG4gICAgICBjb25zdCBsaW5rID0gbmV3Q2FyZFVSTC52YWx1ZTtcbiAgICAgIGFwaVxuICAgICAgICAuYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnN0IF9pZCA9IHJlcy5faWQ7XG4gICAgICAgICAgYWRkQ2FyZCh7IG5hbWUsIGxpbmssIF9pZCB9LCBtZWRpYUxpc3QpO1xuICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYXRlXCI7XG4gICAgICAgICAgY2FyZEZvcm0uY2xvc2VQb3B1cCgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICAgIH0pO1xuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY2FyZEZvcm0ub3BlblBvcHVwKCk7XG4gICAgfSk7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG4gICAgY2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG4vLyBjYXJkSWRzLmZvckVhY2goKGl0ZW0pID0+IHtcbi8vICAgYXBpLmRlbGV0ZUNhcmQoaXRlbS5pZCk7XG4vLyB9KTtcbi8vIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IHtcbi8vICAgY29uc29sZS5sb2cocmVzKTtcbi8vIH0pO1xuLy8gYXBpLmFkZE5ld0NhcmQoe1xuLy8gICBuYW1lOiBcIk5ldyBZb3JrXCIsXG4vLyAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTI4NTAxODMtNmQ3OTkwZjQyMzg1P2F1dG89Zm9ybWF0JmZpdD1jcm9wJnE9ODAmdz0zMDg3Jml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuLy8gfSkudGhlbigpO1xuLy8gYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKHJlcykgPT4ge1xuLy8gICByZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKGl0ZW0uX2lkKTtcbi8vICAgICBhcGkuZGVsZXRlQ2FyZChpdGVtLl9pZCk7XG4vLyAgIH0pO1xuLy8gfSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpIHtcbiAgICBzdXBlcihwb3B1cEVsZW1lbnQpO1xuICB9XG4gIG9wZW5Qb3B1cChkYXRhKSB7XG4gICAgY29uc3QgcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHByZXZpZXdJbWFnZURlc2NyID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtZGVzY3JpcHRpb25cIlxuICAgICk7XG5cbiAgICBwcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlRGVzY3IudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlblBvcHVwKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0TWVTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXRNZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0TWVTZWxlY3Rvcik7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0TWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIC8vIGNvbnN0IGlucHV0T2JqZWN0ID0gW107XG4gICAgLy8gZGF0YS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIC8vICAgaW5wdXRPYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAvLyB9KTtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9hYm91dE1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJBcGkiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ0aGlzIiwiX3VybCIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwic2F2ZVVzZXJJbmZvIiwiZGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwiYWRkTmV3Q2FyZCIsImNhcmRJbmZvIiwibGluayIsIl9pZCIsImlkIiwiZGVsZXRlQ2FyZCIsImNhcmRMaWtlVG9nZ2xlIiwiaXNMaWtlZCIsInVwZGF0ZVBpY3R1cmUiLCJhdmF0YXIiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVDYXJkTGlrZSIsIl9jYXJkU2VsZWN0b3IiLCJfbmFtZSIsIl9saW5rIiwiX2lzTGlrZWQiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2hhbmRsZUNhcmRMaWtlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwiZXZ0IiwiX2NhcmRJbWFnZSIsIl9jYXJkRWxlbWVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJhZGQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnIiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnIiLCJyZW1vdmUiLCJfdG9nZ2xlQnV0dG5TdGF0ZSIsIl9oYXNJbnZhbElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0RWxlbWVudHMiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBFbGVtZW50IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuUG9wdXAiLCJjbG9zZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsInJlbmRlckl0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJmb3JtU2VsZWN0b3IiLCJhcGkiLCJwcm9maWxlTW9kYWwiLCJuZXdDYXJkTW9kYWwiLCJkZWxldGVNb2RhbCIsImltYWdlTW9kYWwiLCJwcm9maWxlUGljdHVyZU1vZGFsIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0RGVzYyIsIm5ld0NhcmRUaXRsZSIsIm5ld0NhcmRVUkwiLCJwcm9maWxlRm9ybSIsImFkZENhcmRGb3JtIiwicHJvZmlsZVBpY3R1cmVGb3JtIiwibWVkaWFMaXN0IiwicHJvZmlsZUltYWdlIiwicHJvZmlsZUVkaXRJY29uIiwiZm9ybXMiLCJpbWFnZVBvcHVwIiwicHJldmlld0ltYWdlIiwicHJldmlld0ltYWdlRGVzY3IiLCJwcm9maWxlUG9wdXAiLCJidXR0b24iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBpY3R1cmVQb3B1cCIsInVybCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZGVsZXRlUG9wdXAiLCJjYXJkSWQiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJpbmZvIiwiZm9ybSIsIm5hbWVTZWxlY3RvciIsImFib3V0TWVTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9hYm91dE1lRWxlbWVudCIsInN0eWxlIiwidmlzaWJpbGl0eSIsImFsbCIsInByb2ZpbGVJbmZvIiwiaW5pdENhcmRzIiwiY2FyZHNMaXN0IiwiY2FyZEl0ZW0iLCJuZXdDYXJkIiwiY2FyZEZvcm0iLCJ3cmFwcGVyIiwiYWRkQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=