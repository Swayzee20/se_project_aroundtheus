!function(){"use strict";class e{constructor(e,t,s){this._cardSelector=t,this._name=e.name,this._link=e.link,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton.addEventListener("click",(()=>{this._cardElement.remove()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove()}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputErr(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=e.validationMessage,s.classList.add(this._errorClass)}_hideInputErr(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_toggleButtnState(){this._hasInvalInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalInput(){return console.log(this._inputElements),this._inputElements.some((e=>!e.validity.valid))}_checkInputVal(e){e.validity.valid?this._hideInputErr(e):this._showInputErr(e)}_setEventListeners(){this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtnState()}),0)})),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputVal(e),this._toggleButtnState()}))}))}enableValidation(){this._setEventListeners()}}class s{constructor(e){this._popupElement=e,this._handleEscClose=this._handleEscClose.bind(this)}openPopup(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose,!0)}closePopup(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose,!0)}_handleEscClose(e){"Escape"===e.key&&this.closePopup()}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.closePopup()})),this._popupElement.addEventListener("click",(e=>{e.target==this._popupElement&&this.closePopup()}))}}class o extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t=[];return e.forEach((e=>{t[e.name]=e.value})),t}closePopup(){this._popupForm.reset(),super.closePopup()}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)})),super.setEventListeners()}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"},i=document.querySelector("#edit-modal"),r=document.querySelector("#add-modal"),l=document.querySelector("#image-modal"),a=document.querySelector(".profile__edit-button"),c=(l.querySelector(".modal__close"),document.querySelector(".profile__add-button")),u=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector(".modal__input-name")),d=document.querySelector(".modal__input-description"),m=document.querySelector(".modal__input-title"),_=document.querySelector(".modal__input-url"),p=document.querySelector("#edit-profile-form"),h=document.querySelector("#add-card-form"),f=document.querySelector(".media__list"),E=[p,h],S=new class extends s{constructor(e){super(e)}openPopup(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__image-description");t.alt=e.name,t.src=e.link,s.textContent=e.name,super.openPopup()}}(l);function b(e,t){S.openPopup({name:e,link:t})}const v=new o(i,(e=>{console.log(e),B.setUserInfo(e),v.closePopup()})),x=new o(r,(e=>{!function(e,t){const s=y(e);w.addItem(s)}({name:m.value,link:_.value}),x.closePopup()}));function y(t){return new e(t,"#card-template",b).getView()}const w=new class{constructor(e,t){let{data:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}renderItem(){this._renderer(this._items)}addItem(e){this._container.prepend(e)}}({data:[{name:"New York City",link:"https://images.unsplash.com/photo-1512850183-6d7990f42385?auto=format&fit=crop&q=80&w=3087&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Seattle",link:"https://images.unsplash.com/photo-1604966546340-4870667f1f44?auto=format&fit=crop&q=80&w=3118&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Disney World",link:"https://images.unsplash.com/photo-1597466599360-3b9775841aec?auto=format&fit=crop&q=80&w=2000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Scottland",link:"https://images.unsplash.com/photo-1578240747034-5ba1efe22426?auto=format&fit=crop&q=80&w=3173&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Iceland",link:"https://images.unsplash.com/photo-1489593426629-5e4e00ce821c?auto=format&fit=crop&q=80&w=2143&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Bora Bora",link:"https://images.unsplash.com/photo-1662283804757-ef81acd5471e?auto=format&fit=crop&q=80&w=3165&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],renderer:e=>{const t=y(e);w.addItem(t)}},f);c.addEventListener("click",(()=>{x.openPopup()})),a.addEventListener("click",(()=>{const e=B.getUserInfo();u.value=e.name,d.value=e.about,v.openPopup()})),E.forEach((function(e){new t(n,e).enableValidation()}));const B=new class{constructor(e){let{nameSelector:t,aboutMeSelector:s}=e;this._nameElement=document.querySelector(t),this._aboutMeElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutMeElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._aboutMeElement.textContent=e.description}}({nameSelector:".profile__title",aboutMeSelector:".profile__description"});w.renderItems(),v.setEventListeners(),x.setEventListeners(),S.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NkksV0FDMUMsR0pnQmtCLENBQ2xCSixhQUFjLGtCQUNkQyxnQkFBaUIsMEJDdURuQnBCLEVBQVVTLGNBRVZoQixFQUFhL0Isb0JBQ2JrQyxFQUFTbEMsb0JBQ1Q0QixFQUFXNUIsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuICBfdG9nZ2xlQnV0dG5TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIF9oYXNJbnZhbElucHV0KCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX2lucHV0RWxlbWVudHMpO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbChpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG5TdGF0ZSgpO1xuICAgICAgfSwgMCk7XG4gICAgfSk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRuU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cEVsZW1lbnQ7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW5Qb3B1cCgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSwgdHJ1ZSk7XG4gIH1cbiAgY2xvc2VQb3B1cCgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSwgdHJ1ZSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgICAgfSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50LCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBFbGVtZW50KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGNvbnN0IGlucHV0T2JqZWN0ID0gW107XG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dE9iamVjdDtcbiAgfVxuICBjbG9zZVBvcHVwKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGlucHV0T2JqZWN0ID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRPYmplY3QpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiTmV3IFlvcmsgQ2l0eVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTI4NTAxODMtNmQ3OTkwZjQyMzg1P2F1dG89Zm9ybWF0JmZpdD1jcm9wJnE9ODAmdz0zMDg3Jml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTZWF0dGxlXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwNDk2NjU0NjM0MC00ODcwNjY3ZjFmNDQ/YXV0bz1mb3JtYXQmZml0PWNyb3AmcT04MCZ3PTMxMTgmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkRpc25leSBXb3JsZFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTc0NjY1OTkzNjAtM2I5Nzc1ODQxYWVjP2F1dG89Zm9ybWF0JmZpdD1jcm9wJnE9ODAmdz0yMDAwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTY290dGxhbmRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTc4MjQwNzQ3MDM0LTViYTFlZmUyMjQyNj9hdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTgwJnc9MzE3MyZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiSWNlbGFuZFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0ODk1OTM0MjY2MjktNWU0ZTAwY2U4MjFjP2F1dG89Zm9ybWF0JmZpdD1jcm9wJnE9ODAmdz0yMTQzJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCb3JhIEJvcmFcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjYyMjgzODA0NzU3LWVmODFhY2Q1NDcxZT9hdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTgwJnc9MzE2NSZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbl07XG5jb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG5jb25zdCBwcm9maWxlSW5mbyA9IHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBhYm91dE1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59O1xuZXhwb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncywgcHJvZmlsZUluZm8gfTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNldHRpbmdzLCBwcm9maWxlSW5mbyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8vIGNvbnN0IHNldHRpbmdzID0ge1xuLy8gICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4vLyAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuLy8gICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuLy8gICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25faW5hY3RpdmVcIixcbi8vICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4vLyAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxuLy8gfTtcblxuY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgbmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbW9kYWxcIik7XG5jb25zdCBpbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgaW1hZ2VNb2RhbENsb3NlQnV0dG9uID0gaW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LW5hbWVcIik7XG5jb25zdCBpbnB1dERlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dC1kZXNjcmlwdGlvblwiKTtcbmNvbnN0IG5ld0NhcmRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LXRpdGxlXCIpO1xuY29uc3QgbmV3Q2FyZFVSTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LXVybFwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xuY29uc3QgbWVkaWFMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZWRpYV9fbGlzdFwiKTtcbmNvbnN0IGZvcm1zID0gW3Byb2ZpbGVGb3JtLCBhZGRDYXJkRm9ybV07XG4vLyBjb25zdCBwcm9maWxlSW5mbyA9IFtwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NdO1xuY29uc3QgcHJvZmlsZUlucHV0cyA9IFtpbnB1dE5hbWUsIGlucHV0RGVzY107XG4vL1BvcHVwc1xuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZU1vZGFsKTtcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xuICBpbWFnZVBvcHVwLm9wZW5Qb3B1cCh7IG5hbWUsIGxpbmsgfSk7XG59XG5cbi8vUG9wdXAgRm9ybXNcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHByb2ZpbGVNb2RhbCwgKGRhdGEpID0+IHtcbiAgY29uc29sZS5sb2coZGF0YSk7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBwcm9maWxlUG9wdXAuY2xvc2VQb3B1cCgpO1xufSk7XG5jb25zdCBjYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKG5ld0NhcmRNb2RhbCwgKGRhdGEpID0+IHtcbiAgY29uc3QgbmFtZSA9IG5ld0NhcmRUaXRsZS52YWx1ZTtcbiAgY29uc3QgbGluayA9IG5ld0NhcmRVUkwudmFsdWU7XG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0sIG1lZGlhTGlzdCk7XG4gIGNhcmRGb3JtLmNsb3NlUG9wdXAoKTtcbn0pO1xuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcbn1cbmZ1bmN0aW9uIGFkZENhcmQoZGF0YSwgd3JhcHBlcikge1xuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcbiAgY2FyZHNMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XG59XG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkSXRlbSk7XG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShuZXdDYXJkKTtcbiAgICB9LFxuICB9LFxuICBtZWRpYUxpc3Rcbik7XG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2FyZEZvcm0ub3BlblBvcHVwKCk7XG59KTtcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgaW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IGluZm8ubmFtZTtcbiAgaW5wdXREZXNjLnZhbHVlID0gaW5mby5hYm91dDtcbiAgcHJvZmlsZVBvcHVwLm9wZW5Qb3B1cCgpO1xufSk7XG5cbmZvcm1zLmZvckVhY2goZnVuY3Rpb24gKGZvcm0pIHtcbiAgY29uc3QgbmV3Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtKTtcbiAgbmV3Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBwcm9maWxlSW5mb1xuICAvLyBwcm9maWxlSW5mby5uYW1lU2VsZWN0b3IsXG4gIC8vIHByb2ZpbGVJbmZvLmFib3V0TWVTZWxlY3RvclxuKTtcbmNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xuXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmNhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpIHtcbiAgICBzdXBlcihwb3B1cEVsZW1lbnQpO1xuICB9XG4gIG9wZW5Qb3B1cChkYXRhKSB7XG4gICAgY29uc3QgcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIGNvbnN0IHByZXZpZXdJbWFnZURlc2NyID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtZGVzY3JpcHRpb25cIlxuICAgICk7XG5cbiAgICBwcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlRGVzY3IudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlblBvcHVwKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xuICAgIHRoaXMuX2l0ZW1zID0gZGF0YTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuICAvL1RoaXMgZnVuY3Rpb24gcmVuZGVycyB0aGUgbmV3IGNhcmRzXG4gIC8vc2luY2UgaXQgaXMgbm90IGFuIGFycmF5L3RoZW4gYWRkSXRlbSBhZGRzIHRoZW1cbiAgcmVuZGVySXRlbSgpIHtcbiAgICB0aGlzLl9yZW5kZXJlcih0aGlzLl9pdGVtcyk7XG4gIH1cbiAgLy9pIGNoYW5nZWQgdGhpcyB0byBcInByZXBlbmRcIiBidXQgdGhpcyBub3Qgb25seVxuICAvLyBhZGRzIG5ldyBjYXJkcywgaXQgYWxzbyBhZGRzIHRoZSBhcnJheSBvZiBpbml0aWFsIGNhcmRzXG4gIC8vIHNvIGknbSBub3Qgc3VyZSBpZiBpdHMgY29ycmVjdFxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRNZVNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dE1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRNZVNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXRNZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgLy8gY29uc3QgaW5wdXRPYmplY3QgPSBbXTtcbiAgICAvLyBkYXRhLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgLy8gICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIC8vIH0pO1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Fib3V0TWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9jYXJkU2VsZWN0b3IiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl9jYXJkSW1hZ2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnIiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVyciIsIl90b2dnbGVCdXR0blN0YXRlIiwiX2hhc0ludmFsSW5wdXQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJjb25zb2xlIiwibG9nIiwiX2lucHV0RWxlbWVudHMiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwiZXZ0IiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBFbGVtZW50IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuUG9wdXAiLCJjbG9zZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwicHJldmVudERlZmF1bHQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlTW9kYWwiLCJuZXdDYXJkTW9kYWwiLCJpbWFnZU1vZGFsIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0RGVzYyIsIm5ld0NhcmRUaXRsZSIsIm5ld0NhcmRVUkwiLCJwcm9maWxlRm9ybSIsImFkZENhcmRGb3JtIiwibWVkaWFMaXN0IiwiZm9ybXMiLCJpbWFnZVBvcHVwIiwicHJldmlld0ltYWdlIiwicHJldmlld0ltYWdlRGVzY3IiLCJwcm9maWxlUG9wdXAiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2FyZEZvcm0iLCJ3cmFwcGVyIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmQiLCJjYXJkc0xpc3QiLCJhZGRJdGVtIiwiYWRkQ2FyZCIsIl9yZWYiLCJjb250YWluZXIiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJyZW5kZXJJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkSXRlbSIsImluZm8iLCJnZXRVc2VySW5mbyIsImFib3V0IiwiZm9ybSIsIm5hbWVTZWxlY3RvciIsImFib3V0TWVTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9hYm91dE1lRWxlbWVudCIsImRlc2NyaXB0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==